<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jogo de Plataforma</title>
<style>
:root { --bg:#f4f4f4; --player:#27ae60; --platform:#34495e; --text:#2c3e50; }
body.dark { --bg:#121212; --player:#2ecc71; --platform:#1e1e1e; --text:#f1f1f1; }

body {
    margin:0;
    font-family:Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
    display:flex;
    flex-direction:column;
    align-items:center;
    transition:all 0.3s;
    min-height: 100vh;
}

header {
    width:100%;
    text-align:center;
    padding:15px;
    background:var(--platform);
    color:white;
    position:relative;
}

.toggle-theme {
    position:absolute;
    right:15px;
    top:15px;
    cursor:pointer;
    font-size:22px;
    user-select:none;
}

canvas {
    background:var(--bg);
    display:block;
    margin:20px auto;
    border:2px solid var(--text);
    max-width:95vw;
    height:auto;
    box-sizing: border-box;
}

button {
    padding:10px 20px;
    margin:10px auto 30px;
    cursor:pointer;
    border:none;
    border-radius:5px;
    background:#ff6600;
    color:white;
    font-weight:bold;
    display: block;
    max-width: 90vw;
    font-size: 16px;
}

/* Responsividade */
@media(max-width:600px){
    .toggle-theme { font-size:18px; right:10px; top:10px; }
    button { width:90%; font-size:16px; padding:10px; }
}
</style>
</head>
<body>

<header>
    <h1>Jogo de Plataforma</h1>
    <div class="toggle-theme" id="toggleTheme" title="Alternar Tema">ðŸŒ™</div>
</header>

<canvas id="gameCanvas" width="600" height="400" aria-label="Ãrea do jogo de plataforma"></canvas>
<button onclick="voltar()">Voltar Ã  Landing Page</button>

<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");

function ajustarCanvas(){
    const vw=Math.min(window.innerWidth*0.95,600);
    canvas.width=vw;
    canvas.height=vw*2/3; // proporÃ§Ã£o 3:2
}
ajustarCanvas();
window.addEventListener("resize",ajustarCanvas);

let w=canvas.width, h=canvas.height;

// jogador
let player={x:50, y:h-60, w:30, h:30, dy:0, grounded:false};

// plataformas
let platforms=[
    {x:0, y:h-20, w:w, h:20},
    {x:w*0.15, y:h-100, w:w*0.3, h:10},
    {x:w*0.5, y:h-150, w:w*0.25, h:10},
    {x:w*0.8, y:h-200, w:w*0.15, h:10}
];

const gravity=0.8, speed=4, jump=15;
let keys={};
let score=0;
let highScore=localStorage.getItem("highScore")||0;

function gameLoop(){
    ctx.clearRect(0,0,w,h);

    // plataformas
    ctx.fillStyle="var(--platform)";
    platforms.forEach(p=>{ ctx.fillRect(p.x,p.y,p.w,p.h); });

    // jogador
    player.dy+=gravity;
    player.y+=player.dy;

    player.grounded=false;
    platforms.forEach(p=>{
        if(player.x< p.x + p.w && player.x + player.w > p.x &&
           player.y< p.y + p.h && player.y + player.h > p.y && player.dy>=0){
            player.y=p.y - player.h;
            player.dy=0;
            player.grounded=true;
        }
    });

    if(keys["ArrowLeft"]||keys["a"]) player.x-=speed;
    if(keys["ArrowRight"]||keys["d"]) player.x+=speed;

    if(player.x<0) player.x=0;
    if(player.x+w>canvas.width) player.x=canvas.width-player.w;
    if(player.y>canvas.height){ player.y=h-60; score=0; }

    ctx.fillStyle="var(--player)";
    ctx.fillRect(player.x,player.y,player.w,player.h);

    ctx.fillStyle="var(--text)";
    ctx.font="16px Arial";
    ctx.fillText("PontuaÃ§Ã£o: "+score,10,20);
    ctx.fillText("Recorde: "+highScore,10,40);

    requestAnimationFrame(gameLoop);
}

document.addEventListener("keydown",e=>{
    keys[e.key]=true;
    if((e.key=="ArrowUp"||e.key=="w") && player.grounded){
        player.dy=-jump;
        score++;
        if(score>highScore){ highScore=score; localStorage.setItem("highScore",highScore); }
    }
});
document.addEventListener("keyup",e=>{ keys[e.key]=false; });

gameLoop();

function voltar(){ window.location.href="index.html"; }

// Tema
const toggleTheme=document.getElementById("toggleTheme");
let modo=localStorage.getItem("tema")||"light";
function aplicarTema(){
    if(modo==="dark") document.body.classList.add("dark");
    else document.body.classList.remove("dark");
    toggleTheme.textContent = modo==="dark"?"â˜€ï¸":"ðŸŒ™";
    localStorage.setItem("tema",modo);
}
toggleTheme.addEventListener("click", ()=>{
    modo=modo==="light"?"dark":"light";
    aplicarTema();
});
aplicarTema();
</script>

</body>
</html>
